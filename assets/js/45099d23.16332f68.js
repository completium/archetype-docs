"use strict";(self.webpackChunkarchetype_docs=self.webpackChunkarchetype_docs||[]).push([[7580],{4048:function(e,t,n){var r=n(5318);t.Z=void 0;var a=r(n(4938)),i=n(5893),o=(0,a.default)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");t.Z=o},1519:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),l=n(7192),s=n(1796),c=n(2110),d=n(1539),m=n(8979);function p(e){return(0,m.Z)("MuiDivider",e)}(0,n(6087).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var h=n(5893);const u=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],f=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,a.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:(0,s.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,a.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${e.palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,a.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${e.palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,a.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),v=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,a.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})));var k=i.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:c,component:m=(s?"div":"hr"),flexItem:k=!1,light:y=!1,orientation:g="horizontal",role:_=("hr"!==m?"separator":void 0),textAlign:x="center",variant:w="fullWidth"}=n,b=(0,r.Z)(n,u),Z=(0,a.Z)({},n,{absolute:i,component:m,flexItem:k,light:y,orientation:g,role:_,textAlign:x,variant:w}),E=(e=>{const{absolute:t,children:n,classes:r,flexItem:a,light:i,orientation:o,textAlign:s,variant:c}=e,d={root:["root",t&&"absolute",c,i&&"light","vertical"===o&&"vertical",a&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,l.Z)(d,p,r)})(Z);return(0,h.jsx)(f,(0,a.Z)({as:m,className:(0,o.Z)(E.root,c),role:_,ref:t,ownerState:Z},b,{children:s?(0,h.jsx)(v,{className:E.wrapper,ownerState:Z,children:s}):null}))}))},6912:function(e,t,n){n.d(t,{_:function(){return v}});var r=n(7294),a=n(7462),i=n(3366),o=n(3905),l=["components"],s={toc:[]};function c(e){var t=e.components,n=(0,i.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Number of tez held by the contract."),(0,o.kt)("p",null,"It is indeed possible to send tez to a contract, either with a buitlin ",(0,o.kt)("em",{parentName:"p"},"tansfer")," command (tezos-client, wallets, ...) or when calling an entrypoint."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Note however that it is ",(0,o.kt)("strong",{parentName:"p"},"not")," possible to transfer the balance of a contract unless it is ",(0,o.kt)("strong",{parentName:"p"},"explicitely")," made possible by entrypoints."))),(0,o.kt)("p",null,"If a contract is receiving tez, it is recommended to add the following ",(0,o.kt)("inlineCode",{parentName:"p"},"collect")," entrypoint:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-archetype"},"entry collect(collector : address) {\n  called by owner\n  effect {\n    transfer balance to collector\n  }\n}\n")))}c.isMDXComponent=!0;var d=n(6886),m=n(2156),p=["components"],h={toc:[]};function u(e){var t=e.components,n=(0,i.Z)(e,p);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Chain unique identifier."),(0,o.kt)("p",null,"It is typically used in ",(0,o.kt)("em",{parentName:"p"},"signed")," permits data to be ",(0,o.kt)("em",{parentName:"p"},"verified")," on chain, in order to avoid replay attacks from testnet to mainnet (so that a permit from testnet cannot be used on mainnet)."),(0,o.kt)("p",null,"The table below shows the chain id of the main networks:"),(0,o.kt)(d.ZP,{container:!0,mdxType:"Grid"},(0,o.kt)(d.ZP,{xs:12,sm:12,md:2.5,mdxType:"Grid"},"Mainnet"),(0,o.kt)(d.ZP,{xs:12,sm:12,md:9.5,mdxType:"Grid"},(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"NetXdQprcVkpaWU"'))),(0,o.kt)(d.ZP,{xs:12,mdxType:"Grid"},(0,o.kt)(m.Z,{mdxType:"ThemedDivider"})),(0,o.kt)(d.ZP,{xs:12,sm:12,md:2.5,style:{marginTop:"18px"},mdxType:"Grid"},"Testnet (Ithacanet)"),(0,o.kt)(d.ZP,{xs:12,sm:12,md:9.5,style:{marginTop:"18px"},mdxType:"Grid"},(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'"NetXnHfVqm9iesp"')))),(0,o.kt)("p",null,"The chain id is provided by the tezos node at:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"<node url>/chains/main/chain_id\n")))}u.isMDXComponent=!0;var f="https://tezos.gitlab.io/michelson-reference",v={minblocktime:{desc:r.createElement("div",null,"Current minimal block time (between two blocks) in seconds."),type:"nat",michelson:"MIN_BLOCK_TIME",michelson_ref_url:f+"/#instr-MIN_BLOCK_TIME",related:[]},balance:{desc:r.createElement(c,null),type:"tez",michelson:"BALANCE",michelson_ref_url:f+"/#instr-BALANCE",related:[]},self_chain_id:{desc:r.createElement(u,null),type:"chain_id",michelson:"CHAIN_ID",michelson_ref_url:f+"/#instr-CHAIN_ID",related:[]},caller:{desc:"Address calling the contract. It may be an account or another smart contract.",type:"address",michelson:"SENDER",michelson_ref_base_url:f+"/#SENDER",related:[{keyword:"source",link:"/docs/reference/expressions/constants#source"},{keyword:"called by",link:"/docs/reference/declarations/entrypoint#called-by"}]},level:{desc:r.createElement("div",null,"Current block level."),type:"nat",michelson:"LEVEL",michelson_ref_url:f+"/#instr-LEVEL",related:[]},now:{desc:r.createElement("div",null,"Block date. It is constant throughout endpoint execution."),type:"date",michelson:"NOW",michelson_ref_url:f+"/#instr-NOW",related:[]},self_address:{desc:r.createElement("div",null,"Address of current contract."),type:"address",michelson:"SELF_ADDRESS",michelson_ref_url:f+"/#instr-SELF_ADDRESS",related:[{keyword:"caller",link:"/docs/reference/expressions/constants#caller"},{keyword:"sourced by",link:"/docs/reference/declarations/entrypoint#sourced-by"}]},source:{desc:"Address of the account at the origin of the call to the entrypoint. If Alice calls contract A, which calls contract B, then source in contract B is Alice (and caller in contract B is contract A).",type:"address",michelson:"SOURCE",michelson_ref_url:f+"/#instr-SOURCE",related:[{keyword:"caller",link:"/docs/reference/expressions/constants#caller"},{keyword:"sourced by",link:"/docs/reference/declarations/entrypoint#sourced-by"}]},state:{desc:r.createElement("div",null,"State of the contract when designed as a state machine. It is changed with ",r.createElement("code",null,"transition")," entrypoints, not assignment instructions.",r.createElement("p",null),"The Michelson representation is a ",r.createElement("code",null,"nat")," storage variable named ",r.createElement("code",null,"_state"),"."),related:[{keyword:"State Machine",link:"/docs/statemachine"},{keyword:"States declaration",link:"/docs/reference/declarations/compositetypes#states"},{keyword:"Transition",link:"/docs/reference/declarations/compositetypes#transition"},{keyword:"Assignment",link:"/docs/reference/instructions/assignment"}]},transferred:{desc:r.createElement("div",null,"Amount of tez sent to current entrypoint execution."),type:"tez",michelson:"AMOUNT",michelson_ref_url:f+"/#instr-AMOUNT",related:[{keyword:"tez",link:"/docs/reference/types#tez"},{keyword:"balance",link:"/docs/reference/expressions/constants#balance"}]},total_voting_power:{desc:"Total voting power of all contracts.",type:"nat",michelson:"TOTAL_VOTING_POWER",michelson_ref_url:f+"/#instr-TOTAL_VOTING_POWER",related:[{keyword:"voting_power",link:"/docs/reference/expressions/builtins#voting_power(k%20:%20key_hash)"}]}}},6029:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(7294),a=n(6886),i=n(5861),o=n(1519),l=n(6292),s=n(9960),c=n(4048),d=n(2321),m=n(4810),p=n(563);function h(e){return r.createElement(m.Z,{injectFirst:!0},r.createElement(a.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:1,style:{marginBottom:"60px"}},r.createElement(a.ZP,{item:!0,xs:12,style:{marginBottom:"18px"}},r.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans"}},e.data.desc)),void 0!==e.data.type?r.createElement(a.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Type")):r.createElement("div",null),void 0!==e.data.type?r.createElement(a.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(s.Z,{to:"/docs/reference/types#"+(void 0!==e.data.typeUrl?e.data.typeUrl:e.data.type)},r.createElement("code",null,e.data.type))):r.createElement("div",null),void 0!==e.data.michelson?r.createElement(a.ZP,{item:!0,xs:12},r.createElement(o.Z,{className:d.Z.divider})):r.createElement("div",null),void 0!==e.data.michelson?r.createElement(a.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Michelson")):r.createElement("div",null),void 0!==e.data.michelson?r.createElement(a.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(s.Z,{to:e.data.michelson_ref_url},r.createElement(l.Z,{style:{fontFamily:"Roboto Mono",color:"var(--ifm-color-primary)"},size:"small",disableRipple:!0,endIcon:r.createElement(c.Z,{fontSize:"small"})},e.data.michelson))):r.createElement("div",null),void 0!==e.data.related&&e.data.related.length>0?r.createElement(a.ZP,{item:!0,xs:12},r.createElement(o.Z,{className:d.Z.divider})):r.createElement("div",null),void 0!==e.data.related&&e.data.related.length>0?r.createElement(a.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Related")):r.createElement("div",null),void 0!==e.data.related&&e.data.related.length>0?r.createElement(a.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(a.ZP,{container:!0,direction:"row",spacing:3},e.data.related.map((function(e,t){return r.createElement(p.n,{key:"rel"+t,value:e.keyword,link:e.link})})))):r.createElement("div",null)))}},2156:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(7294),a=n(1519),i=n(4810),o=n(2321);function l(){return r.createElement(i.Z,{injectFirst:!0},r.createElement(a.Z,{className:o.Z.divider}))}},563:function(e,t,n){n.d(t,{n:function(){return l}});var r=n(9960),a=n(6886),i=n(5861),o=n(7294),l=function(e){return o.createElement(a.ZP,{item:!0},o.createElement(r.Z,{to:e.link},o.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans"}},null!=e.code&&!1===e.code?e.value:o.createElement("code",null,e.value))))}},2772:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return d},default:function(){return f},frontMatter:function(){return c},metadata:function(){return m},toc:function(){return h}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=n(6029),l=n(6912),s=["components"],c={sidebar_position:3},d="Constants",m={unversionedId:"reference/expressions/constants",id:"reference/expressions/constants",title:"Constants",description:"balance",source:"@site/docs/reference/expressions/constants.md",sourceDirName:"reference/expressions",slug:"/reference/expressions/constants",permalink:"/docs/reference/expressions/constants",draft:!1,editUrl:"https://github.com/completium/archetype-docs/blob/main/docs/reference/expressions/constants.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Operation",permalink:"/docs/reference/instructions/operation"},next:{title:"Variables",permalink:"/docs/reference/expressions/variables"}},p={},h=[{value:"<code>balance</code>",id:"balance",level:3},{value:"<code>caller</code>",id:"caller",level:3},{value:"<code>level</code>",id:"level",level:3},{value:"<code>now</code>",id:"now",level:3},{value:"<code>min_block_time</code>",id:"min_block_time",level:3},{value:"<code>self_address</code>",id:"self_address",level:3},{value:"<code>self_chain_id</code>",id:"self_chain_id",level:3},{value:"<code>source</code>",id:"source",level:3},{value:"<code>state</code>",id:"state",level:3},{value:"<code>transferred</code>",id:"transferred",level:3},{value:"<code>total_voting_power</code>",id:"total_voting_power",level:3}],u={toc:h};function f(e){var t=e.components,n=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"constants"},"Constants"),(0,i.kt)("h3",{id:"balance"},(0,i.kt)("inlineCode",{parentName:"h3"},"balance")),(0,i.kt)(o.Z,{data:l._.balance,mdxType:"Constant"}),(0,i.kt)("h3",{id:"caller"},(0,i.kt)("inlineCode",{parentName:"h3"},"caller")),(0,i.kt)(o.Z,{data:l._.caller,mdxType:"Constant"}),(0,i.kt)("h3",{id:"level"},(0,i.kt)("inlineCode",{parentName:"h3"},"level")),(0,i.kt)(o.Z,{data:l._.level,mdxType:"Constant"}),(0,i.kt)("h3",{id:"now"},(0,i.kt)("inlineCode",{parentName:"h3"},"now")),(0,i.kt)(o.Z,{data:l._.now,mdxType:"Constant"}),(0,i.kt)("h3",{id:"min_block_time"},(0,i.kt)("inlineCode",{parentName:"h3"},"min_block_time")),(0,i.kt)(o.Z,{data:l._.minblocktime,mdxType:"Constant"}),(0,i.kt)("h3",{id:"self_address"},(0,i.kt)("inlineCode",{parentName:"h3"},"self_address")),(0,i.kt)(o.Z,{data:l._.self_address,mdxType:"Constant"}),(0,i.kt)("h3",{id:"self_chain_id"},(0,i.kt)("inlineCode",{parentName:"h3"},"self_chain_id")),(0,i.kt)(o.Z,{data:l._.self_chain_id,mdxType:"Constant"}),(0,i.kt)("h3",{id:"source"},(0,i.kt)("inlineCode",{parentName:"h3"},"source")),(0,i.kt)(o.Z,{data:l._.source,mdxType:"Constant"}),(0,i.kt)("h3",{id:"state"},(0,i.kt)("inlineCode",{parentName:"h3"},"state")),(0,i.kt)(o.Z,{data:l._.state,mdxType:"Constant"}),(0,i.kt)("h3",{id:"transferred"},(0,i.kt)("inlineCode",{parentName:"h3"},"transferred")),(0,i.kt)(o.Z,{data:l._.transferred,mdxType:"Constant"}),(0,i.kt)("h3",{id:"total_voting_power"},(0,i.kt)("inlineCode",{parentName:"h3"},"total_voting_power")),(0,i.kt)(o.Z,{data:l._.total_voting_power,mdxType:"Constant"}))}f.isMDXComponent=!0},2321:function(e,t){t.Z={divider:"divider_LuCZ",gradient:"gradient_kJ7D"}}}]);