"use strict";(self.webpackChunkarchetype_docs=self.webpackChunkarchetype_docs||[]).push([[8717],{4048:function(e,t,n){var a=n(5318);t.Z=void 0;var l=a(n(4938)),i=n(5893),r=(0,l.default)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");t.Z=r},1519:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(3366),l=n(7462),i=n(7294),r=n(6010),s=n(7192),o=n(1796),c=n(2110),d=n(1539),m=n(8979);function p(e){return(0,m.Z)("MuiDivider",e)}(0,n(6087).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var u=n(5893);const k=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],f=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,l.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:(0,o.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,l.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${e.palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,l.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${e.palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,l.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),h=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,l.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})));var v=i.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:c,component:m=(o?"div":"hr"),flexItem:v=!1,light:g=!1,orientation:y="horizontal",role:E=("hr"!==m?"separator":void 0),textAlign:w="center",variant:N="fullWidth"}=n,x=(0,a.Z)(n,k),Z=(0,l.Z)({},n,{absolute:i,component:m,flexItem:v,light:g,orientation:y,role:E,textAlign:w,variant:N}),A=(e=>{const{absolute:t,children:n,classes:a,flexItem:l,light:i,orientation:r,textAlign:o,variant:c}=e,d={root:["root",t&&"absolute",c,i&&"light","vertical"===r&&"vertical",l&&"flexItem",n&&"withChildren",n&&"vertical"===r&&"withChildrenVertical","right"===o&&"vertical"!==r&&"textAlignRight","left"===o&&"vertical"!==r&&"textAlignLeft"],wrapper:["wrapper","vertical"===r&&"wrapperVertical"]};return(0,s.Z)(d,p,a)})(Z);return(0,u.jsx)(f,(0,l.Z)({as:m,className:(0,r.Z)(A.root,c),role:E,ref:t,ownerState:Z},x,{children:o?(0,u.jsx)(h,{className:A.wrapper,ownerState:Z,children:o}):null}))}))},432:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(7855),l=n(9960),i=n(6886),r=n(1519),s=n(5861),o=n(4810),c=n(7294),d=n(2321),m=n(3465),p=[{label:"asset",link:"/docs/asset"},{label:"asset to big_map",link:"/docs/asset"},{label:"asset to iterable_big_map",link:"/docs/asset"},{label:"aggregate",link:"/docs/reference/types#aggregate<A>"},{label:"partition",link:"/docs/reference/types#partition<A>"},{label:"asset_view",link:"/docs/reference/types#asset_view<A>"}];function u(e){var t;return c.createElement(i.ZP,{item:!0,xs:12,style:{marginTop:"12px"}},c.createElement(i.ZP,{container:!0},c.createElement(i.ZP,{item:!0},c.createElement("h4",{style:(t={marginBottom:"0px",color:"grey",fontWeight:"normal"},t.marginBottom="12px",t)},"Type of collection ",c.createElement("code",null,"A"))),c.createElement(i.ZP,{item:!0,xs:12},c.createElement(r.Z,{className:d.Z.divider,style:{marginBottom:"12px"}})),c.createElement(i.ZP,{item:!0,xs:12},c.createElement(i.ZP,{container:!0,spacing:2},p.map((function(t,n){return c.createElement(i.ZP,{item:!0},c.createElement(l.Z,{to:t.link},c.createElement("code",{style:{textDecoration:e.data.includes(t.label)?"none":"line-through"}},t.label)))}))))))}var k=function(e){return c.createElement(i.ZP,{item:!0,xs:12},c.createElement(i.ZP,{container:!0},c.createElement(i.ZP,{item:!0,xs:12},c.createElement(r.Z,{className:d.Z.divider,style:{marginBottom:"12px"}})),c.createElement(i.ZP,{item:!0,md:e.xs,sm:6,xs:6},c.createElement(i.ZP,{container:!0},c.createElement(i.ZP,{item:!0,xs:e.xs>4?2:4},c.createElement(s.Z,null,c.createElement("code",null,e.alias)," :")),c.createElement(i.ZP,{item:!0,xs:e.xs>4?10:8},c.createElement(s.Z,null," ",void 0===e.withLink||e.withLink?c.createElement(l.Z,{to:e.prefix+e.type.toLowerCase()},c.createElement("code",null,e.type)):c.createElement("code",null,e.type))))),c.createElement(i.ZP,{item:!0,md:12-e.xs,sm:6,xs:6},c.createElement(s.Z,{style:{fontFamily:"IBM Plex Sans"}},e.desc))))},f=function(e){return c.createElement(i.ZP,{item:!0,xs:12},c.createElement(i.ZP,{container:!0},c.createElement(i.ZP,{item:!0,xs:12},c.createElement(r.Z,{className:d.Z.divider,style:{marginBottom:"12px"}})),c.createElement(i.ZP,{item:!0,xs:12,style:{marginBottom:"6px"}},c.createElement(s.Z,null,void 0===e.withLink||e.withLink?c.createElement(l.Z,{to:e.prefix+e.type.toLowerCase()},c.createElement("code",null,e.type)):c.createElement("code",null,e.type))),c.createElement(i.ZP,{item:!0,xs:10},c.createElement(s.Z,{style:{fontFamily:"IBM Plex Sans"}},e.desc))))},h=function(e){return function(e,t,n){for(var l,i=t,r=(0,a.Z)(n);!(l=r()).done;)i=e(i,l.value);return i}((function(e,t){return e>=t?e:t}),-1/0,e)};function v(e){var t,n,a=void 0!==e.data.parameters?(t=e.data.parameters,(n=h(t.map((function(e){return e.alias.length+e.type.length}))))>30?6:n>20?5:n>10?3:2):0;return c.createElement(o.Z,{injectFirst:!0},c.createElement(i.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:1,style:{marginBottom:"60px"}},c.createElement(i.ZP,{item:!0,xs:12},c.createElement(s.Z,{style:{fontFamily:"IBM Plex Sans"}},e.data.desc)),void 0!==e.data.appliesto?c.createElement(u,{data:e.data.appliesto}):c.createElement("div",null),void 0!==e.data.parameters&&e.data.parameters.length>0?c.createElement(i.ZP,{item:!0},c.createElement("h4",{style:{marginBottom:"0px",marginTop:"12px",color:"grey",fontWeight:"normal"}},e.data.parameters.length>1?"Parameters":"Parameter")):c.createElement("div",null),void 0!==e.data.parameters&&e.data.parameters.length>0?e.data.parameters.map((function(e,t){return c.createElement(k,{key:"bp"+t,alias:e.alias,type:e.type,desc:e.desc,xs:a,withLink:e.withLink,prefix:e.prefix?e.prefix:"/docs/reference/types#"})})):c.createElement("div",null),void 0!==e.data.returns?c.createElement(i.ZP,{item:!0,style:{marginTop:"12px",color:"grey"}},c.createElement("h4",{style:{marginTop:"12px",marginBottom:"0px",fontWeight:"normal"}},"Returns")):c.createElement(i.ZP,{item:!0,style:{marginTop:"12px",color:"grey"}},c.createElement("h4",{style:{marginTop:"12px",marginBottom:"0px",fontWeight:"normal"}})),void 0!==e.data.returns?c.createElement(f,{type:e.data.returns.type,withLink:e.data.returns.withLink,desc:e.data.returns.desc,prefix:e.data.returns.prefix?e.data.returns.prefix:"/docs/reference/types#"}):c.createElement("div",null),c.createElement(i.ZP,{item:!0,xs:12},c.createElement(m.Z,{fails:e.data.fails,michelson:e.data.michelson,michelson_ref_url:e.data.michelson_ref_url,emits:e.data.emits,related:e.data.related,showfail:e.data.showfail}))))}},3465:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(5861),l=n(6886),i=n(1519),r=n(7294),s=n(2321),o=n(8271),c=n(563),d=function(e){return void 0===e.fails||0===e.fails.length?r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey",fontStyle:"italic"}},"does not fail"):r.createElement(l.ZP,{container:!0},e.fails.map((function(t,n){return r.createElement(l.ZP,{container:!0,style:{marginBottom:e.fails.length>1?"22px":"0px"}},r.createElement(l.ZP,{key:"fk"+n,item:!0,xs:t.keyword.length>12?12:2,style:{marginBottom:t.keyword.length>12?"12px":"0px"}},r.createElement(a.Z,null,r.createElement("code",null,t.keyword))),r.createElement(l.ZP,{key:"fd"+n,item:!0,xs:t.keyword.length>12?12:10},r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans"}},t.desc)),n<e.fails.length-1?r.createElement(l.ZP,{item:!0,xs:12},r.createElement(i.Z,{className:s.Z.divider,style:{marginTop:"12px"}})):r.createElement("div",null))})))};function m(e){return r.createElement(l.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:1,style:{marginTop:"0px"}},null==e.showfail||null!=e.showfail&&e.showfail?r.createElement(r.Fragment,null,r.createElement(l.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Fails with")),r.createElement(l.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(d,{fails:e.fails}))):r.createElement("div",null),void 0!==e.michelson?r.createElement(l.ZP,{item:!0,xs:12},r.createElement(i.Z,{className:s.Z.divider})):r.createElement("div",null),void 0!==e.michelson?r.createElement(l.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Michelson")):r.createElement("div",null),void 0!==e.michelson?r.createElement(l.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(o.R,{michelson:e.michelson,michelson_ref_url:e.michelson_ref_url})):r.createElement("div",null),void 0!==e.emits?r.createElement(l.ZP,{item:!0,xs:12},r.createElement(i.Z,{className:s.Z.divider})):r.createElement("div",null),void 0!==e.emits?r.createElement(l.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Emits")):r.createElement("div",null),void 0!==e.emits?r.createElement(l.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(l.ZP,{container:!0,direction:"row",spacing:3},e.emits.map((function(e,t){return r.createElement(c.n,{key:"rel"+t,value:e.keyword,link:e.link,code:e.code})})))):r.createElement("div",null),void 0!==e.related?r.createElement(l.ZP,{item:!0,xs:12},r.createElement(i.Z,{className:s.Z.divider})):r.createElement("div",null),void 0!==e.related?r.createElement(l.ZP,{item:!0,xs:3,sm:2,md:2},r.createElement(a.Z,{style:{fontFamily:"IBM Plex Sans",color:"grey"}},"Related")):r.createElement("div",null),void 0!==e.related?r.createElement(l.ZP,{item:!0,xs:9,sm:10,md:10},r.createElement(l.ZP,{container:!0,direction:"row",spacing:3},e.related.map((function(e,t){return r.createElement(c.n,{key:"rel"+t,value:e.keyword,link:e.link,code:e.code})})))):r.createElement("div",null))}},8271:function(e,t,n){n.d(t,{R:function(){return o}});var a=n(7294),l=n(6292),i=n(6886),r=n(9960),s=n(4048),o=function(e){return void 0===e.michelson_ref_url?"[object Array]"!==Object.prototype.toString.call(e.michelson)?a.createElement(l.Z,{style:{textTransform:"none",fontFamily:"Roboto Mono",color:"var(--ifm-color-primary)"},disableFocusRipple:!0,size:"small",disableRipple:!0},e.michelson):a.createElement(i.ZP,{container:!0,spacing:1},e.michelson.map((function(e,t){return a.createElement(i.ZP,{item:!0,key:"mt"+t},a.createElement(l.Z,{style:{textTransform:"none",fontFamily:"Roboto Mono",color:"var(--ifm-color-primary)"},disableFocusRipple:!0,size:"small",disableRipple:!0},e))}))):a.createElement(r.Z,{to:e.michelson_ref_url},a.createElement(l.Z,{style:{textTransform:"none",fontFamily:"Roboto Mono",color:"var(--ifm-color-primary)"},size:"small",disableRipple:!0,endIcon:a.createElement(s.Z,{fontSize:"small"})},e.michelson))}},563:function(e,t,n){n.d(t,{n:function(){return s}});var a=n(9960),l=n(6886),i=n(5861),r=n(7294),s=function(e){return r.createElement(l.ZP,{item:!0},r.createElement(a.Z,{to:e.link},r.createElement(i.Z,{style:{fontFamily:"IBM Plex Sans"}},null!=e.code&&!1===e.code?e.value:r.createElement("code",null,e.value))))}},2971:function(e,t,n){n.r(t),n.d(t,{assets:function(){return X},contentTitle:function(){return F},default:function(){return j},frontMatter:function(){return S},metadata:function(){return z},toc:function(){return W}});var a=n(7462),l=n(3366),i=n(7294),r=n(3905),s=n(432);var o=["components"],c={toc:[]};function d(e){var t=e.components,n=(0,l.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Evaluates expression ",(0,r.kt)("inlineCode",{parentName:"p"},"e")," when asset with key ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," is found in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),". It returns value ",(0,r.kt)("inlineCode",{parentName:"p"},"d")," when asset ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," is not found in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"When asset is found, asset field ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," in expression ",(0,r.kt)("inlineCode",{parentName:"p"},"e")," is accessed with the ",(0,r.kt)("inlineCode",{parentName:"p"},"the.f")," syntax."),(0,r.kt)("p",null,"For example, consider the ",(0,r.kt)("inlineCode",{parentName:"p"},"ledger")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset ledger {\n  holder : address;\n  amount : nat;\n}\n")),(0,r.kt)("p",null,"The following determines whether the ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/expressions/constants#caller"},(0,r.kt)("inlineCode",{parentName:"a"},"caller"))," has a positive balance or not:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const pos_balance = ledger[caller] ? the.amount > 0 : false;\n")),(0,r.kt)("p",null,"It is equivalent to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const pos_balance =\n  match ledger.get(caller) with\n  | some av -> av.amount > 0\n  | none    -> false\n  end\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"When accessing several fields' values of the same asset, it is better gas-wise to retrieve first the ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/types#asset_value%3CA%3E"},(0,r.kt)("inlineCode",{parentName:"a"},"asset_value"))," locally with ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/expressions/asset#ak--asset_keya"},(0,r.kt)("inlineCode",{parentName:"a"},"[]"))," or ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/expressions/asset#agetk--asset_keya"},(0,r.kt)("inlineCode",{parentName:"a"},"get"))," operators, and then access a field value with the ",(0,r.kt)("inlineCode",{parentName:"p"},".")," operator."))))}d.isMDXComponent=!0;var m=["components"],p={toc:[]};function u(e){var t=e.components,n=(0,l.Z)(e,m);return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Returns the value of field ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," of asset ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),", or fails if ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," is not found in ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"For example, consider the ledger asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset ledger {\n  holder : address;\n  amount : nat;\n}\n")),(0,r.kt)("p",null,"The following retrieves the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," field for ",(0,r.kt)("inlineCode",{parentName:"p"},"caller")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const a : nat = ledger[caller].amount;\n")),(0,r.kt)("p",null,"It is equivalent to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},'const a : option<nat> =\n  match ledger[caller] with\n  | some av -> av.amount\n  | none    -> fail(("ASSET_NOT_FOUND", "ledger"))\n  end\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"When accessing several fields' values of the same asset, it is better gas-wise to retrieve first the ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/types#asset_value%3CA%3E"},(0,r.kt)("inlineCode",{parentName:"a"},"asset_value"))," locally with ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/expressions/asset#ak--asset_keya"},(0,r.kt)("inlineCode",{parentName:"a"},"[]"))," operator, and then access a field value with the ",(0,r.kt)("inlineCode",{parentName:"p"},".")," operator."))))}u.isMDXComponent=!0;var k=["components"],f={toc:[]};function h(e){var t=e.components,n=(0,l.Z)(e,k);return(0,r.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Accesses field ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," of asset with key ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),". It returns an option of field value, which is ",(0,r.kt)("inlineCode",{parentName:"p"},"none")," when asset ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," is not found in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"For example, consider the ",(0,r.kt)("inlineCode",{parentName:"p"},"ledger")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset ledger {\n  holder : address;\n  amount : nat;\n}\n")),(0,r.kt)("p",null,"The following returns an option of field ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," for ",(0,r.kt)("inlineCode",{parentName:"p"},"caller")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const a : option<nat> = ledger[caller]?.amount;\n")),(0,r.kt)("p",null,"It is equivalent to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const a : option<nat> =\n  match ledger[caller] with\n  | some av -> some(av.amount)\n  | none    -> none\n  end\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"When accessing several fields' values of the same asset, it is better gas-wise to retrieve first the ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/types#asset_value%3CA%3E"},(0,r.kt)("inlineCode",{parentName:"a"},"asset_value"))," locally with ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/expressions/asset#ak--asset_keya"},(0,r.kt)("inlineCode",{parentName:"a"},"[]"))," operator, and then access a field value with the ",(0,r.kt)("inlineCode",{parentName:"p"},".")," operator."))))}h.isMDXComponent=!0;var v=["components"],g={toc:[]};function y(e){var t=e.components,n=(0,l.Z)(e,v);return(0,r.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Returns an option of ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/types#asset_value%3CA%3E"},(0,r.kt)("inlineCode",{parentName:"a"},"asset_value"))," value from key ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),". It is ",(0,r.kt)("inlineCode",{parentName:"p"},"none")," if key ",(0,r.kt)("inlineCode",{parentName:"p"},"k")," is not found in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"For example, consider the ",(0,r.kt)("inlineCode",{parentName:"p"},"ledger")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset ledger {\n  holder : address;\n  amount : nat;\n}\n")),(0,r.kt)("p",null,"The following returns an option of the record value associated with ",(0,r.kt)("inlineCode",{parentName:"p"},"caller")," address:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"const h : option<asset_value<ledger>> = ledger[caller];\n")))}y.isMDXComponent=!0;var E=["components"],w={toc:[]};function N(e){var t=e.components,n=(0,l.Z)(e,E);return(0,r.kt)("wrapper",(0,a.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Returns an option of the key of ",(0,r.kt)("inlineCode",{parentName:"p"},"i"),"th element (starting from 0) in collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),", according to its order (natural key order for ",(0,r.kt)("inlineCode",{parentName:"p"},"asset")," collection)."),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Implementation is in O(n) complexity (Michelson lists are linked)."))))}N.isMDXComponent=!0;var x=["components"],Z={toc:[]};function A(e){var t=e.components,n=(0,l.Z)(e,x);return(0,r.kt)("wrapper",(0,a.Z)({},Z,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Selects assets from collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," that verifies predicate ",(0,r.kt)("inlineCode",{parentName:"p"},"p"),"."),(0,r.kt)("p",null,"A predicate is an expression typed ",(0,r.kt)("inlineCode",{parentName:"p"},"bool"),"; its use the ",(0,r.kt)("inlineCode",{parentName:"p"},"the")," keyword to refer to the evaluated asset. For example, consider the following ",(0,r.kt)("inlineCode",{parentName:"p"},"car")," asset declaration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset car {\n  vin     : string;\n  nbdoors : nat = 0;\n}\n")),(0,r.kt)("p",null,"The following expression returns cars with number of doors greater than 3:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"var v : asset_view<car> = car.select(the.nbdoors > 3);\n")))}A.isMDXComponent=!0;var _=["components"],b={toc:[]};function C(e){var t=e.components,n=(0,l.Z)(e,_);return(0,r.kt)("wrapper",(0,a.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Sorts collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," according to asset field(s) ",(0,r.kt)("inlineCode",{parentName:"p"},"f"),", in ascending or descending order."),(0,r.kt)("p",null,"It is possible to sort according to multiple criteria; consider for example the ",(0,r.kt)("inlineCode",{parentName:"p"},"result")," asset:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset result {\n  id    : string;\n  score : nat;\n  time  : duration;\n}\n")),(0,r.kt)("p",null,"The following expression sorts ",(0,r.kt)("inlineCode",{parentName:"p"},"result")," assets in ",(0,r.kt)("inlineCode",{parentName:"p"},"score")," decreasing order, then in ",(0,r.kt)("inlineCode",{parentName:"p"},"time")," increasing order; so that the first asset of the resulting ",(0,r.kt)("a",{parentName:"p",href:"/docs/reference/types#asset_view%3CA%3E"},"asset_view")," is the result with the highest score and minimal time:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"var v := result.sort(desc(score), time)\n")))}C.isMDXComponent=!0;var P=["components"],T={toc:[]};function M(e){var t=e.components,n=(0,l.Z)(e,P);return(0,r.kt)("wrapper",(0,a.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Sums values of asset field ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," over collection ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"For example, consider the asset declaration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"asset player {\n  id     : address;\n  random : nat;\n}\n")),(0,r.kt)("p",null,"The following is the sum of the ",(0,r.kt)("inlineCode",{parentName:"p"},"random")," field over asset collection ",(0,r.kt)("inlineCode",{parentName:"p"},"player"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-archetype"},"var r = player.sum(random);\n")))}M.isMDXComponent=!0;var B=["components"],L={toc:[]};function R(e){var t=e.components,n=(0,l.Z)(e,B);return(0,r.kt)("wrapper",(0,a.Z)({},L,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Returns the ",(0,r.kt)("a",{parentName:"p",href:"/docs/language-basics/container"},"basic container")," of collection of asset ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"It is used to pass the collection of assets to an entry point."))}R.isMDXComponent=!0;var D={get:{sig:"get",desc:i.createElement(y,null),appliesto:["asset","asset to big_map","asset to iterable_big_map"],parameters:[{type:"asset_key<A>",alias:"k",desc:i.createElement("div",null,"Asset key")}],returns:{type:"option<asset_value<A>>",withLink:!1,desc:i.createElement("div",null,"Returns an option of the record value of asset ",i.createElement("code",null,"k"),".")},fails:[],related:[{keyword:"Asset",link:"/docs/asset"},{keyword:"get",link:"/docs/reference/expressions/builtins#get(m%20:%20(big_)?map<K,%20V>,%20k%20:%20K)"}]},getf:{sig:"A[k].f",desc:i.createElement(u,null),appliesto:["asset","asset to big_map","asset to iterable_big_map"],parameters:[{type:"asset_key<A>",alias:"k",desc:i.createElement("div",null,"Key of asset to access")},{type:"literal",withLink:!1,alias:"f",desc:i.createElement("div",null,"field name to access")}],fails:[{keyword:'("ASSET_NOT_FOUND", "A")',desc:i.createElement("div",null,"Fails if ",i.createElement("code",null,"k")," is not found in collection ",i.createElement("code",null,"A"))}],returns:{type:"T",withLink:!1,desc:i.createElement("div",null,"Returns field ",i.createElement("code",null,"f")," value of asset ",i.createElement("code",null,"k"),".")}},getof:{sig:"A[k]?f",desc:i.createElement(h,null),appliesto:["asset","asset to big_map","asset to iterable_big_map"],parameters:[{type:"asset_key<A>",alias:"k",desc:i.createElement("div",null,"Key of asset to access")},{type:"literal",withLink:!1,alias:"f",desc:i.createElement("div",null,"field name to access")}],returns:{type:"option<T>",desc:i.createElement("div",null,"Returns an option of field ",i.createElement("code",null,"f")," value of asset ",i.createElement("code",null,"k"),".")},fails:[],related:[{keyword:"Asset",link:"/docs/asset"}]},getfd:{sig:"A[k]?e:d",desc:i.createElement(d,null),appliesto:["asset","asset to big_map","asset to iterable_big_map"],parameters:[{type:"asset_key<A>",alias:"k",desc:i.createElement("div",null,"Key of asset to access")},{type:"expression",withLink:!1,alias:"e",desc:i.createElement("div",null,"Expression to evaluate when asset ",i.createElement("code",null,"k")," is found")},{type:"any",withLink:!1,alias:"d",desc:i.createElement("div",null,"Default value to return when key not found (same type as ",i.createElement("code",null,"f"),")")}],returns:{type:"T",withLink:!1,desc:i.createElement("div",null,"Evaluation of expression ",i.createElement("code",null,"e")," when asset ",i.createElement("code",null,"k")," is found in collection ",i.createElement("code",null,"A"),", and ",i.createElement("code",null,"d")," otherwise.")},fails:[],related:[{keyword:"Asset",link:"/docs/asset"}]},contains:{sig:"A.contains(k)",desc:i.createElement("div",null,"Tests whether collection ",i.createElement("code",null,"A")," contains asset with key ",i.createElement("code",null,"k"),"."),appliesto:["asset","asset to big_map","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"asset_key<A>",alias:"k",desc:i.createElement("div",null,"Key value to test")}],returns:{type:"bool",desc:i.createElement("div",null,i.createElement("ul",null,i.createElement("li",null,i.createElement("code",null,"true")," if ",i.createElement("code",null,"A")," contains ",i.createElement("code",null,"k")),i.createElement("li",null,i.createElement("code",null,"false")," otherwise")))},related:[{keyword:"Asset",link:"/docs/asset"}]},count:{sig:"A.count()",desc:i.createElement("div",null,"Retuns the number of elements in collection ",i.createElement("code",null,"A"),"."),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],returns:{type:"nat",desc:"Number of elements"}},nth:{sig:"A.nth(i)",desc:i.createElement(N,null),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"nat",alias:"i",desc:i.createElement("div",null,"Position of element (between 0 and ",i.createElement("code",null,"A.count()")," - 1)")}],returns:{type:"option<asset_key<A>>",withLink:!1,desc:i.createElement("div",null,"Option of key of ith element of the collection:",i.createElement("ul",null,i.createElement("li",null,i.createElement("code",null,"some")," of ith element"),i.createElement("li",null,i.createElement("code",null,"none")," when ",i.createElement("code",null,"i")," is out of bound")))},related:[{keyword:"Asset",link:"/docs/asset"}]},sort:{sig:"A.sort(f)",desc:i.createElement(C,null),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"asset field",withLink:!1,alias:"f",desc:i.createElement("div",null,"Asset field name of comparable type; it accepts wrapping decorator to specify sort order:",i.createElement("ul",null,i.createElement("li",null,i.createElement("code",null,"asc(f)")," for ascending order; ",i.createElement("code",null,"asc")," is by default and may be omitted"),i.createElement("li",null,i.createElement("code",null,"desc(f)")," for descending order")))}],returns:{type:"asset_view<A>",desc:i.createElement("div",null,"A asset_view of asset ",i.createElement("code",null,"A")," sorted by values of field ",i.createElement("code",null,"f"),".")},related:[{keyword:"Asset",link:"/docs/asset"}]},sum:{sig:"A.sum(f)",desc:i.createElement(M,null),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"asset field",withLink:!1,alias:"f",desc:i.createElement("div",null,"Asset field name of type ",i.createElement("code",null,"int")," or ",i.createElement("code",null,"nat"),".")}],returns:{type:"int",desc:i.createElement("div",null,"The sum of field ",i.createElement("code",null,"f")," values in collection ",i.createElement("code",null,"A"),".")},related:[{keyword:"Asset",link:"/docs/asset"},{keyword:"int",link:"/docs/reference/types#int"},{keyword:"nat",link:"/docs/reference/types#nat"}]},select:{sig:"A.select(p)",desc:i.createElement(A,null),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"predicate",withLink:!1,alias:"p",desc:i.createElement("div",null,"Predicate to select assets.")}],returns:{type:"asset_view<A>",desc:i.createElement("div",null,"A asset_view of asset ",i.createElement("code",null,"A")," that verifies predicate ",i.createElement("code",null,"p"),".")},related:[{keyword:"Asset",link:"/docs/asset"}]},head:{sig:"A.head(i : nat)",desc:i.createElement("div",null,"Returns the first i elements of collection ",i.createElement("code",null,"A")," according to its order (natural key order for ",i.createElement("code",null,"asset")," collection)."),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"nat",alias:"i",desc:i.createElement("div",null,"Number of elements to consider")}],returns:{type:"asset_view<A>",desc:i.createElement("div",null,"A asset_view of the first ",i.createElement("code",null,"i")," elements of ",i.createElement("code",null,"A")," (or all elements if ",i.createElement("code",null,"A.count() <= i"),").")},related:[{keyword:"Asset",link:"/docs/asset"}]},tail:{sig:"A.head(i : nat)",desc:i.createElement("div",null,"Returns the last i elements of collection ",i.createElement("code",null,"A")," according to its order (natural key order for ",i.createElement("code",null,"asset")," collection)."),appliesto:["asset","asset to iterable_big_map","aggregate","partition","asset_view"],parameters:[{type:"nat",alias:"i",desc:i.createElement("div",null,"Number of elements to consider")}],returns:{type:"asset_view<A>",desc:i.createElement("div",null,"A asset_view of the last ",i.createElement("code",null,"i")," elements of ",i.createElement("code",null,"A")," (or all elements if ",i.createElement("code",null,"A.count() <= i"),").")},related:[{keyword:"Asset",link:"/docs/asset"}]},to_container:{sig:"A.to_container()",desc:i.createElement(R,null),appliesto:["asset","asset to big_map"],parameters:[],returns:{type:"asset_container<A>",desc:i.createElement("div",null,"Collection ",i.createElement("code",null,"A")," as basic container.")},related:[{keyword:"Asset",link:"/docs/asset"}]}},I=["components"],S={sidebar_position:6},F="Asset",z={unversionedId:"reference/expressions/asset",id:"reference/expressions/asset",title:"Asset",description:"A[k : asset_key]",source:"@site/docs/reference/expressions/asset.md",sourceDirName:"reference/expressions",slug:"/reference/expressions/asset",permalink:"/docs/reference/expressions/asset",draft:!1,editUrl:"https://github.com/completium/archetype-docs/blob/main/docs/reference/expressions/asset.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"docs",previous:{title:"Declaration",permalink:"/docs/reference/expressions/declaration"}},X={},W=[{value:"<code>A[k : asset_key&lt;A&gt;]</code>",id:"ak--asset_keya",level:3},{value:"<code>A[k : asset_key&lt;A&gt;].f</code>",id:"ak--asset_keyaf",level:3},{value:"<code>A[k : asset_key&lt;A&gt;]?.f</code>",id:"ak--asset_keyaf-1",level:3},{value:"<code>A.contains(k : asset_key&lt;A&gt;)</code>",id:"acontainsk--asset_keya",level:3},{value:"<code>A.count()</code>",id:"acount",level:3},{value:"<code>A.nth(i : nat)</code>",id:"anthi--nat",level:3},{value:"<code>A.sort(f)</code>",id:"asortf",level:3},{value:"<code>A.sum(f)</code>",id:"asumf",level:3},{value:"<code>A.select(p)</code>",id:"aselectp",level:3},{value:"<code>A.head(i : nat)</code>",id:"aheadi--nat",level:3},{value:"<code>A.tail(i : nat)</code>",id:"ataili--nat",level:3},{value:"<code>A.to_container()</code>",id:"ato_container",level:3}],V={toc:W};function j(e){var t=e.components,n=(0,l.Z)(e,I);return(0,r.kt)("wrapper",(0,a.Z)({},V,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"asset"},"Asset"),(0,r.kt)("h3",{id:"ak--asset_keya"},(0,r.kt)("inlineCode",{parentName:"h3"},"A[k : asset_key<A>]")),(0,r.kt)(s.Z,{data:D.get,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"ak--asset_keyaf"},(0,r.kt)("inlineCode",{parentName:"h3"},"A[k : asset_key<A>].f")),(0,r.kt)(s.Z,{data:D.getf,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"ak--asset_keyaf-1"},(0,r.kt)("inlineCode",{parentName:"h3"},"A[k : asset_key<A>]?.f")),(0,r.kt)(s.Z,{data:D.getof,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"acontainsk--asset_keya"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.contains(k : asset_key<A>)")),(0,r.kt)(s.Z,{data:D.contains,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"acount"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.count()")),(0,r.kt)(s.Z,{data:D.count,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"anthi--nat"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.nth(i : nat)")),(0,r.kt)(s.Z,{data:D.nth,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"asortf"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.sort(f)")),(0,r.kt)(s.Z,{data:D.sort,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"asumf"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.sum(f)")),(0,r.kt)(s.Z,{data:D.sum,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"aselectp"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.select(p)")),(0,r.kt)(s.Z,{data:D.select,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"aheadi--nat"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.head(i : nat)")),(0,r.kt)(s.Z,{data:D.head,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"ataili--nat"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.tail(i : nat)")),(0,r.kt)(s.Z,{data:D.tail,mdxType:"Builtin"}),(0,r.kt)("h3",{id:"ato_container"},(0,r.kt)("inlineCode",{parentName:"h3"},"A.to_container()")),(0,r.kt)(s.Z,{data:D.to_container,mdxType:"Builtin"}))}j.isMDXComponent=!0},2321:function(e,t){t.Z={divider:"divider_LuCZ",gradient:"gradient_kJ7D"}}}]);